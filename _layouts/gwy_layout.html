<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ page.title }} | å¤‡è€ƒå°çª</title>
    <!-- å¼•å…¥å­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Lora:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <!-- å¼•å…¥ Bootstrap (ä»…ç”¨äºåŸºç¡€é‡ç½®å’Œæ …æ ¼ï¼Œå¤§éƒ¨åˆ†æ‰‹å†™) -->
    <link rel="stylesheet" href="{{ "/css/bootstrap.min.css" | prepend: site.baseurl }}">
    
    <style>
        /* --- 1. å…¨å±€æ¸©é¦¨é£æ ¼ --- */
        body {
            background-color: #fdf6e3; /* ç¾Šçš®çº¸è‰² */
            color: #5a5a5a;
            font-family: 'Lora', 'Noto Serif SC', serif; /* è¡¬çº¿ä½“ */
            line-height: 1.8;
        }
        
        a { color: #d35400; text-decoration: none; transition: color 0.3s; }
        a:hover { color: #e67e22; text-decoration: underline; }

        .container { max-width: 800px; margin: 0 auto; padding: 40px 20px; }

        /* --- 2. å¯†ç é”é®ç½© --- */
        #lock-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #fdf6e3;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }
        .lock-content { text-align: center; }
        .lock-input {
            padding: 10px;
            font-size: 1.2rem;
            border: 2px solid #d35400;
            border-radius: 5px;
            background: transparent;
            outline: none;
            color: #5a5a5a;
            font-family: inherit;
            margin-top: 20px;
            width: 200px;
            text-align: center;
        }
        .lock-btn {
            margin-top: 10px;
            padding: 8px 20px;
            background: #d35400;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
            font-size: 1rem;
        }
        .lock-hint { color: #d35400; margin-top: 10px; font-size: 0.9rem; opacity: 0; transition: opacity 0.3s; }

        /* --- 3. å¤´éƒ¨è®¾è®¡ --- */
        header { text-align: center; margin-bottom: 60px; }
        .page-title { font-size: 2.5rem; font-weight: 700; color: #2c3e50; margin-bottom: 10px; }
        .countdown-wrapper { 
            background: rgba(255,255,255,0.6); 
            padding: 20px; 
            border-radius: 15px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: inline-block;
            margin-top: 20px;
        }
        .days-left { font-size: 3rem; color: #d35400; font-weight: bold; line-height: 1; }
        .sub-text { font-size: 1rem; color: #7f8c8d; font-style: italic; }

        /* --- 4. çƒ­åŠ›å›¾ (é€‚é…æš–è‰²) --- */
        .heatmap-container { margin: 40px 0; overflow-x: auto; display: flex; justify-content: center;}
        .heatmap-grid { display: grid; grid-template-rows: repeat(7, 12px); grid-auto-flow: column; gap: 3px; }
        .heatmap-cell { width: 12px; height: 12px; border-radius: 2px; background-color: #e0e0e0; }
        /* æš–è‰²è°ƒç­‰çº§ */
        .level-0 { background-color: #e0e0e0; }
        .level-1 { background-color: #fce38a; } /* æµ…é»„ */
        .level-2 { background-color: #f39c12; } /* æ©™è‰² */
        .level-3 { background-color: #d35400; } /* æ·±æ©™ */
        .level-4 { background-color: #c0392b; } /* çº¢æ£• */

        /* --- 5. æ—¶é—´è½´æ—¥è®° --- */
        .timeline { position: relative; margin-top: 50px; padding-left: 30px; }
        .timeline::before {
            content: '';
            position: absolute;
            left: 0; top: 0; bottom: 0;
            width: 2px;
            background: #e0e0e0;
        }
        
        .timeline-item { position: relative; margin-bottom: 40px; }
        .timeline-dot {
            position: absolute;
            left: -35px; top: 5px;
            width: 12px; height: 12px;
            background: #d35400;
            border-radius: 50%;
            border: 2px solid #fdf6e3;
            box-shadow: 0 0 0 2px #d35400;
        }
        .timeline-date {
            font-size: 0.9rem;
            color: #999;
            margin-bottom: 5px;
            font-style: italic;
        }
        .timeline-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.03);
            border: 1px solid rgba(0,0,0,0.02);
            transition: transform 0.2s;
        }
        .timeline-card:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.06); }
        .timeline-title { font-size: 1.4rem; margin-top: 0; color: #34495e; }
        .timeline-meta { font-size: 0.85rem; color: #bdc3c7; margin-bottom: 15px; }
        .timeline-content { font-size: 1rem; color: #5a5a5a; }
        
        /* ç®€å•çš„ Markdown å†…å®¹æ ·å¼ä¿®æ­£ */
        .timeline-content h3 { font-size: 1.2rem; margin-top: 15px; }
        .timeline-content ul { padding-left: 20px; }
    </style>
</head>
<body>

    <!-- å¯†ç é” -->
    <div id="lock-screen">
        <div class="lock-content">
            <h2 style="color: #2c3e50; margin-bottom: 10px;">ğŸ”’ å¤‡è€ƒç¦åœ°</h2>
            <p style="color: #7f8c8d;">ä¿æŒä¸“æ³¨ï¼Œé—²äººå…è¿›</p>
            <input type="password" id="password-input" class="lock-input" placeholder="è¾“å…¥å¯†ç ">
            <br>
            <button onclick="checkPassword()" class="lock-btn">è§£é”</button>
            <p id="lock-hint" class="lock-hint">å¯†ç é”™è¯¯</p>
        </div>
    </div>

    <div class="container">
        <!-- å¤´éƒ¨ -->
        <header>
            <div class="page-title">æ˜Ÿå…‰ä¸é—®èµ¶è·¯äºº</div>
            <div class="countdown-wrapper">
                <div class="sub-text">è·ç¦» 2027å¹´å›½è€ƒ è¿˜æœ‰</div>
                <div class="days-left" id="countdown-display">---</div>
                <div class="sub-text">Day</div>
            </div>
            <div id="daily-quote" style="margin-top: 30px; font-size: 1.1rem; color: #7f8c8d;">Loading...</div>
        </header>

        <!-- çƒ­åŠ›å›¾ -->
        <div class="heatmap-container">
            <div id="study-heatmap" class="heatmap-grid"></div>
        </div>

        <!-- æ—¶é—´è½´æ—¥è®°æµ -->
        <div class="timeline">
            {{ content }}
        </div>
        
        <!-- é¡µè„š -->
        <footer style="text-align: center; margin-top: 80px; color: #bdc3c7; font-size: 0.8rem;">
            <p>&copy; {{ site.time | date: '%Y' }} å¤‡è€ƒå°çª</p>
        </footer>
    </div>

    <!-- é€»è¾‘è„šæœ¬ -->
    <script>
        // --- 1. å¯†ç é”é€»è¾‘ ---
        // ä¿®æ”¹è¿™é‡Œçš„ '123456' ä¸ºæ‚¨æƒ³è¦çš„å¯†ç 
        const CORRECT_PASSWORD = '123456'; 
        
        function checkPassword() {
            const input = document.getElementById('password-input').value;
            const hint = document.getElementById('lock-hint');
            if (input === CORRECT_PASSWORD) {
                document.getElementById('lock-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('lock-screen').style.display = 'none';
                }, 500);
                localStorage.setItem('gwy_unlocked', 'true');
            } else {
                hint.style.opacity = '1';
            }
        }

        // æ£€æŸ¥æ˜¯å¦å·²è§£é”
        if (localStorage.getItem('gwy_unlocked') === 'true') {
            document.getElementById('lock-screen').style.display = 'none';
        }

        // --- 2. å€’è®¡æ—¶é€»è¾‘ ---
        const targetDate = new Date("2026-11-29"); 
        const today = new Date();
        const timeLeft = targetDate - today;
        const daysLeft = Math.ceil(timeLeft / (1000 * 60 * 60 * 24));
        document.getElementById('countdown-display').textContent = daysLeft;

        // --- 3. éšæœºæ ¼è¨€ ---
        // (æ ¼è¨€æ•°æ®å°†ç”± gwy.html æ³¨å…¥)
    </script>

</body>
</html>
