---
layout: default
title: "TAGS"
nav-order: 3
description: "Keep hungry, keep foolish"
header-img: "img/tag-bg.png"
---

<style>
.sidebar-container {
    position: -webkit-sticky;
    position: sticky;
    top: 80px;
}

#wordcloud-container {
    width: 100%;
    height: 500px;
    display: flex;
    justify-content: center;
    align-items: center;
    background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
    border-radius: 16px;  /* 圆润边角，苹果风格 */
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);  /* 柔和阴影 */
    padding: 20px;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(20px);  /* 增强毛玻璃 */
    -webkit-backdrop-filter: blur(20px);
}

#wordcloud-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        radial-gradient(circle at 20% 30%, rgba(120, 180, 255, 0.1) 0%, transparent 40%),
        radial-gradient(circle at 80% 70%, rgba(255, 150, 150, 0.1) 0%, transparent 40%);
    pointer-events: none;
}

/* 词云标签的苹果式高级样式 */
.wordcloud-tag {
    position: absolute;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;  /* 苹果系统字体 */
    font-weight: 500;  /* 中等粗细，现代感 */
    -webkit-font-smoothing: antialiased;  /* 抗锯齿，字形平滑 */
    -moz-osx-font-smoothing: grayscale;
    text-shadow: 0 1px 2px rgba(0,0,0,0.08);  /* 柔和阴影，提升立体感 */
    background: rgba(255, 255, 255, 0.25);  /* 半透明白底，毛玻璃子层 */
    backdrop-filter: blur(10px);  /* 每个标签也带轻微模糊 */
    -webkit-backdrop-filter: blur(10px);
    border-radius: 12px;  /* 圆润边角 */
    padding: 6px 12px;  /* 内边距，舒适间距 */
    border: 1px solid rgba(255, 255, 255, 0.2);  /* 细边框，精致 */
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);  /* 苹果式缓动曲线 */
    z-index: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 80%;  /* 防止过长标签溢出 */
}

/* 悬停效果：苹果风微妙放大 + 颜色渐变 + 提升层级 */
.wordcloud-tag:hover {
    transform: scale(1.1) translateY(-2px);  /* 轻微上浮 + 放大 */
    box-shadow: 0 4px 16px rgba(0,0,0,0.15);  /* 增强阴影 */
    background: rgba(255, 255, 255, 0.35);
    color: #000;  /* 深色文字，高对比 */
    z-index: 10;  /* 提升到最上层，避免被挡 */
}

/* 呼吸动画保持 */
@keyframes breathe {
    0% { transform: scale(0.98); opacity: 0.95; }
    50% { transform: scale(1.00); opacity: 1; }
    100% { transform: scale(0.98); opacity: 0.95; }
}

#wordcloud-container {
    animation: breathe 8s ease-in-out infinite;
}
</style>

<!-- Page Header -->
<header class="intro-header" style="background-image: url('{{ site.baseurl }}/{% if page.header-img %}{{ page.header-img }}{% else %}{{ site.header-img }}{% endif %}')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="site-heading" id="tag-heading">
                    <h1>{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}</h1>
                    <span class="subheading">{{ page.description }}</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Main Content -->
<div class="container">
	<div class="row">
		<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <!-- Original Top Tag Cloud -->
			<div id='tag_cloud' class="tags">
				{% for tag in site.tags %}
				<a href="#{{ tag[0] | slugify }}" title="{{ tag[0] }}" rel="{{ tag[1].size }}">{{ tag[0] }}</a>
				{% endfor %}
			</div>
        </div>
    </div>

    <div class="row">
        <!-- Blog Post List (Left Column) -->
		<div class="col-lg-8 col-md-8">
            <!-- Tag List -->
			{% for tag in site.tags %}
			<div class="one-tag-list">
			  	<span class="fa fa-tag listing-seperator" id="{{ tag[0] | slugify }}">
                    <span class="tag-text">{{ tag[0] }}</span>
                </span>
				{% for post in tag[1] %}
				 <div class="post-preview">
				    <a href="{{ post.url | prepend: site.baseurl }}">
				        <h2 class="post-title">{{ post.title }}</h2>
				        {% if post.subtitle %}
				        <h3 class="post-subtitle">{{ post.subtitle }}</h3>
				        {% endif %}
				    </a>
				</div>
				<hr>
				{% endfor %}
			</div>
			{% endfor %}
		</div>

        <!-- Word Cloud Sidebar (Right Column) -->
        <div class="col-lg-4 col-md-4 sidebar-container">
            <div id="wordcloud-container">
                <!-- JS 动态填充标签 -->
            </div>
        </div>
	</div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('wordcloud-container');
    const tagsData = [];
    {% for tag in site.tags %}
        tagsData.push({text: '{{ tag[0] }}', weight: {{ tag[1].size }}, slug: '{{ tag[0] | slugify }}'});
    {% endfor %}
    
    console.log('Tags data for word cloud:', tagsData);
    
    if (tagsData.length > 0) {
        container.innerHTML = '';  // 清空容器
        
        // 简单碰撞避免：多次尝试随机位置
        function placeTag(tag, attempts = 0) {
            if (attempts > 10) return;  // 最多试 10 次
            
            const span = document.createElement('span');
            span.className = 'wordcloud-tag';
            span.textContent = tag.text;
            span.style.fontSize = `${12 + tag.weight * 8}px`;  /* 频率越高越大 */
            span.style.color = `hsl(${Math.random() * 360}, 70%, 45%)`;  /* 柔和随机色，苹果风偏冷调 */
            span.style.left = `${Math.random() * 80}%`;
            span.style.top = `${Math.random() * 80}%`;
            span.style.transform = `rotate(${Math.random() * 60 - 30}deg)`;
            
            // 悬停效果（使用 CSS :hover 简化，但 JS 覆盖 z-index 以确保动态）
            span.addEventListener('mouseenter', () => {
                span.style.zIndex = '10';  /* 动态提升层级到最上 */
                // 其他效果由 CSS 处理
            });
            span.addEventListener('mouseleave', () => {
                span.style.zIndex = '1';  /* 恢复默认层级 */
            });
            
            // 点击跳转
            span.addEventListener('click', () => {
                const anchor = document.getElementById(tag.slug);
                if (anchor) {
                    anchor.scrollIntoView({ behavior: 'smooth' });
                }
            });
            
            container.appendChild(span);
            
            // 检查重叠
            const rect = span.getBoundingClientRect();
            let overlap = false;
            const existing = container.querySelectorAll('.wordcloud-tag');
            existing.forEach(el => {
                if (el !== span && Math.abs(el.getBoundingClientRect().left - rect.left) < 60 && Math.abs(el.getBoundingClientRect().top - rect.top) < 60) {
                    overlap = true;
                }
            });
            if (overlap) {
                container.removeChild(span);
                placeTag(tag, attempts + 1);
            }
        }
        
        // 逐个放置
        tagsData.forEach(tag => placeTag(tag));
        
        console.log('苹果式词云渲染完成，共', tagsData.length, '个标签');
    } else {
        container.innerHTML = '<div class="text-center" style="width:100%; font-size:18px; color:#666;">暂无标签可显示</div>';
    }
});
</script>