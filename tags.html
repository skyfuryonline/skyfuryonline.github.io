---
layout: default
title: "TAGS"
nav-order: 3
description: "Keep hungry, keep foolish"
header-img: "img/tag-bg.png"
---

<style>
.sidebar-container {
    position: -webkit-sticky;
    position: sticky;
    top: 80px;
}

#wordcloud-container {
    width: 100%;
    height: 500px;
    display: flex;
    justify-content: center;
    align-items: center;
    background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    padding: 20px;
    position: relative;
    overflow: hidden;
}

#wordcloud-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        radial-gradient(circle at 20% 30%, rgba(120, 180, 255, 0.1) 0%, transparent 40%),
        radial-gradient(circle at 80% 70%, rgba(255, 150, 150, 0.1) 0%, transparent 40%);
    pointer-events: none;
}

#wordcloud {
    width: 100%;
    height: 100%;
    cursor: default;
}

/* Add a subtle breathing animation to the container */
@keyframes breathe {
    0% { transform: scale(0.98); opacity: 0.95; }
    50% { transform: scale(1.00); opacity: 1; }
    100% { transform: scale(0.98); opacity: 0.95; }
}

#wordcloud-container {
    animation: breathe 8s ease-in-out infinite;
}
</style>

<!-- Page Header -->
<header class="intro-header" style="background-image: url('{{ site.baseurl }}/{% if page.header-img %}{{ page.header-img }}{% else %}{{ site.header-img }}{% endif %}')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="site-heading" id="tag-heading">
                    <h1>{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}</h1>
                    <span class="subheading">{{ page.description }}</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Main Content -->
<div class="container">
	<div class="row">
		<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <!-- Original Top Tag Cloud -->
			<div id='tag_cloud' class="tags">
				{% for tag in site.tags %}
				<a href="#{{ tag[0] | slugify }}" title="{{ tag[0] }}" rel="{{ tag[1].size }}">{{ tag[0] }}</a>
				{% endfor %}
			</div>
        </div>
    </div>

    <div class="row">
        <!-- Blog Post List (Left Column) -->
		<div class="col-lg-8 col-md-8">
            <!-- Tag List -->
			{% for tag in site.tags %}
			<div class="one-tag-list">
			  	<span class="fa fa-tag listing-seperator" id="{{ tag[0] | slugify }}">
                    <span class="tag-text">{{ tag[0] }}</span>
                </span>
				{% for post in tag[1] %}
				 <div class="post-preview">
				    <a href="{{ post.url | prepend: site.baseurl }}">
				        <h2 class="post-title">{{ post.title }}</h2>
				        {% if post.subtitle %}
				        <h3 class="post-subtitle">{{ post.subtitle }}</h3>
				        {% endif %}
				    </a>
				</div>
				<hr>
				{% endfor %}
			</div>
			{% endfor %}
		</div>

        <!-- Word Cloud Sidebar (Right Column) -->
        <div class="col-lg-4 col-md-4 sidebar-container">
            <div id="wordcloud-container">
                <canvas id="wordcloud" width="500" height="500"></canvas>
            </div>
        </div>
	</div>
</div>

<!-- Scripts for WordCloud2 -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('wordcloud-container');
    const tagsData = [];
    {% for tag in site.tags %}
        tagsData.push({text: '{{ tag[0] }}', weight: {{ tag[1].size }}, slug: '{{ tag[0] | slugify }}'});
    {% endfor %}
    
    console.log('Tags data for word cloud:', tagsData);
    
    if (tagsData.length > 0) {
        container.innerHTML = '';  // 清空容器
        
        // 简单碰撞避免：多次尝试随机位置
        function placeTag(tag, attempts = 0) {
            if (attempts > 10) return;  // 最多试 10 次
            
            const span = document.createElement('span');
            span.textContent = tag.text;
            span.style.cssText = `
                position: absolute;
                font-size: ${12 + tag.weight * 8}px;  /* 频率越高越大 (e.g., 1=12px, 2=20px) */
                color: hsl(${Math.random() * 360}, 70%, 50%);  /* 随机鲜艳色 */
                left: ${Math.random() * 80}%;
                top: ${Math.random() * 80}%;
                transform: rotate(${Math.random() * 60 - 30}deg);  /* ±30° 旋转 */
                cursor: pointer;
                transition: all 0.3s ease;  /* 平滑动画 */
                z-index: 1;
                white-space: nowrap;
                padding: 2px 4px;
                border-radius: 4px;
                background: rgba(255,255,255,0.1);  /* 半透明白底，匹配毛玻璃 */
            `;
            
            // 悬停效果：放大 + 颜色变深
            span.addEventListener('mouseenter', () => {
                span.style.transform = `rotate(${Math.random() * 60 - 30}deg) scale(1.2)`;
                span.style.color = '#fff';  // 白字高亮
                span.style.background = 'rgba(0,0,0,0.2)';
            });
            span.addEventListener('mouseleave', () => {
                span.style.transform = `rotate(${Math.random() * 60 - 30}deg) scale(1)`;
                span.style.color = `hsl(${Math.random() * 360}, 70%, 50%)`;
                span.style.background = 'rgba(255,255,255,0.1)';
            });
            
            // 点击跳转到标签锚点
            span.addEventListener('click', () => {
                const anchor = document.getElementById(tag.slug);
                if (anchor) {
                    anchor.scrollIntoView({ behavior: 'smooth' });
                }
            });
            
            container.appendChild(span);
            
            // 检查重叠（简单版：如果太近，移除重试）
            const rect = span.getBoundingClientRect();
            let overlap = false;
            const existing = container.querySelectorAll('span');
            existing.forEach(el => {
                if (el !== span && Math.abs(el.getBoundingClientRect().left - rect.left) < 50 && Math.abs(el.getBoundingClientRect().top - rect.top) < 50) {
                    overlap = true;
                }
            });
            if (overlap) {
                container.removeChild(span);
                placeTag(tag, attempts + 1);  // 重试新位置
            }
        }
        
        // 逐个放置标签
        tagsData.forEach(tag => placeTag(tag));
        
        console.log('纯 JS 词云渲染完成，共', tagsData.length, '个标签');
    } else {
        container.innerHTML = '<div class="text-center" style="width:100%; font-size:18px; color:#666;">暂无标签可显示</div>';
    }
});
</script>